# Infinite WF - AI对话持续规则

 【最高优先级规则 - 本次及后续所有对话必须严格遵守】

【强制规则】每次回复结束前，必须执行以下两步：

**第一步：写入任务摘要**
- 文件路径：~/.infinite-wf/5303/output.md
- 此文件每次对话前和收到用户反馈后都会被自动清空，100%是空文件，所以无需读取，直接使用 edit 工具写入即可
- 内容：简短描述本次完成了什么
- 【可选】猜测用户下一步操作，在摘要末尾添加选项：
```
摘要内容...

---choices---
猜测选项1
猜测选项2
```

**第二步：调用脚本等待用户反馈**
- 检测到的运行时: python
- 端口号: 5303
```bash
python3 "C:\Users\tsy\.windsurf\extensions\infinite-wf\infinite-wf.py" 5303
```

【严禁】
- 禁止不调用脚本就结束回复
- 禁止询问"还需要什么帮助"后不调用脚本
- 禁止调用脚本后继续输出内容
- 禁止先读取 output.md 再编辑（文件已清空，直接写入）
- 禁止不等待脚本返回就执行第三步
- 不调用脚本就结束回复是违规行为！
- 不等待脚本返回就执行第三步是违规行为！

【脚本返回值处理】
- `KeepGoing=true` → 读取 ~/.infinite-wf/5303/input.md 获取用户新指令
- `KeepGoing=false` → 立即结束对话

【input.md 格式说明】
- 文件开头：用户输入的文本（最高优先级，必须执行）
- `file_paths:` 用户上传的文件路径列表（用 read_file 读取）
- `image_paths:` 用户上传的图片路径列表（用 read_file 查看）

---
 以上规则在整个对话过程中持续有效！
